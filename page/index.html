<html>
	<head>
		<link rel="stylesheet" href="style.css">
		<script type="module">
			import { convert } from "./convert.js";
			import { selectTab, populate_select, get_selected_id } from "./elements.js";
			import { get_custom, customize, clear_custom } from "./custom.js"
			import { system_with_id } from "./state.js"

			globalThis.selectTab = selectTab

			globalThis.get_selected_id = get_selected_id
			globalThis.system_with_id = system_with_id
			globalThis.customize = customize
			globalThis.get_custom = get_custom
			globalThis.clear_custom = clear_custom
			globalThis.convert = convert

			populate_select("system_select")
		</script>
	</head>
	<body>
		<div id="column" class="column">
			<div class="tab">
			  <button class="tab_button active" id="presetsButton" onclick="selectTab(event, 'presets', true)">Presets</button>
			  <button class="tab_button" id="customButton" onclick="selectTab(event, 'custom', true)">Custom</button>
			  <button class="tab_button" id="aboutButton" onclick="selectTab(event, 'about', false)">About</button>
			</div>
			<div id="presets" class="tab_content">
				<select id="system_select" style="width: 200px;"></select>
				<button id="convert" onclick="convert(system_with_id(get_selected_id('system_select')))">convert</button>
				<button id="customize" onclick="customize(system_with_id(get_selected_id('system_select'))); selectTab(event, 'custom', true)">customize</button>
			</div>
			<div id="custom" class="tab_content" style="display: none">
				<button onclick="clear_custom()">clear</button><br>
				Name: <input type="text" id="systemName" value="New System"><br>
				<textarea id="systemDescription">System description</textarea>
				<table class=graphTable>
					<tr>
						<td><input id="ae" type="text" class="graph">tr<u>a</u>p</td>
						<td><input id="aa" type="text" class="graph">p<u>a</u>lm</td>
						<td><input id="ei" type="text" class="graph">f<u>a</u>ce</td>
						<td><input id="schwa" type="text" class="graph">comm<u>a</u></td>
						<td><input id="b" type="text" class="graph"><u>b</u>are</td>
						<td><input id="ng" type="text" class="graph">ha<u>ng</u></td>
						<td><input id="k" type="text" class="graph"><u>k</u>iss</td>
						<td><input id="h" type="text" class="graph"><u>h</u>arp</td>
					</tr>
					<tr>
						<td><input id="e" type="text" class="graph">dr<u>e</u>ss</td>
						<td><input id="aw" type="text" class="graph">th<u>ou</u>ght</td>
						<td><input id="ai" type="text" class="graph">pr<u>i</u>ce</td>
						<td><input id="schwar" type="text" class="graph">lett<u>er</u></td>
						<td><input id="ch" type="text" class="graph"><u>ch</u>eer</td>
						<td><input id="p" type="text" class="graph"><u>p</u>eel</td>
						<td><input id="l" type="text" class="graph"><u>l</u>ook</td>
						<td><input id="j" type="text" class="graph"><u>j</u>ust</td>
					</tr>
					<tr>
						<td><input id="ih" type="text" class="graph">k<u>i</u>t</td>
						<td><input id="oo" type="text" class="graph">g<u>oo</u>se</td>
						<td><input id="oi" type="text" class="graph">ch<u>oi</u>ce</td>
						<td></td>
						<td><input id="d" type="text" class="graph"><u>d</u>usk</td>
						<td><input id="r" type="text" class="graph"><u>r</u>oad</td>
						<td><input id="m" type="text" class="graph"><u>m</u>ean</td>
						<td><input id="th" type="text" class="graph"><u>th</u>igh</td>
					</tr>
					<tr>
						<td><input id="uh" type="text" class="graph">str<u>u</u>t</td>
						<td><input id="ee" type="text" class="graph">fl<u>ee</u>ce</td>
						<td><input id="oa" type="text" class="graph">g<u>oa</u>t</td>
						<td></td>
						<td><input id="dh" type="text" class="graph"><u>th</u>ese</td>
						<td><input id="s" type="text" class="graph"><u>s</u>ee</td>
						<td><input id="n" type="text" class="graph"><u>n</u>ear</td>
						<td><input id="v" type="text" class="graph"><u>v</u>ine</td>
					</tr>
					<tr>
						<td><input id="er" type="text" class="graph">n<u>ur</u>se</td>
						<td></td>
						<td><input id="au" type="text" class="graph">m<u>ou</u>th</td>
						<td></td>
						<td><input id="f" type="text" class="graph"><u>f</u>ine</td>
						<td><input id="sh" type="text" class="graph"><u>sh</u>oe</td>
						<td><input id="w" type="text" class="graph"><u>w</u>eak</td>
						<td><input id="z" type="text" class="graph"><u>z</u>oo</td>
					</tr>
					<tr>
						<td><input id="horseshoe" type="text" class="graph">f<u>oo</u>t</td>
						<td></td>
						<td></td>
						<td></td>
						<td><input id="g" type="text" class="graph"><u>g</u>o</td>
						<td><input id="t" type="text" class="graph"><u>t</u>urn</td>
						<td><input id="y" type="text" class="graph"><u>y</u>ear</td>
						<td><input id="zh" type="text" class="graph">bei<u>ge</u></td>
					</tr>
				</table>
				<button id="convert" onclick="convert(get_custom())">convert</button>
			</div>
			<div id="about" class="tab_content" style="display: none">
				<p>About text</p>
			</div>
			<div id="conversion">
				<table id="conversionTable">
					<tr>
						<td>
							<textarea id="input" rows="20" cols="50" resize="none">Sample text</textarea>
						</td>
						<td>
							<p id="output" style="width: 100%; height: 100%"></p>
						</td>
					</tr>
				</table>
			</div>
		</div>
	</body>
</html>